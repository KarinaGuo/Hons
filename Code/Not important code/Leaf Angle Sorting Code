```{r}
### Classifying images from 10.17632/h76nbndxt6.4 into their leaf angle type
library(tidyverse)

Leaf_angles_classification <- read.csv ("Data/Leaf_angles_51.csv") %>% 
  select (Species.name, Type)

Leaf_angles_classification$Species.name <- gsub(" ", "_", Leaf_angles_classification$Species.name)

apply(Leaf_angles_classification, 1, function(x) R.utils::copyDirectory(from = paste0("./Data/LeafAngleImages/", x[1], "./"), to = paste0("./Data/ClassifiedAngleImages/", x[2], "/")))

### Creating meta table linking species, file name and leaf angle type
library(stringr)
setwd("./Data/LeafAngleImages/")
list <- list.files(pattern = ".JPG$", recursive = TRUE)
list_df <- as.data.frame (list)
list_split <- as.data.frame(str_split_fixed (list_df$list, "/", 2))
colnames(list_split) <- c("Species.name", "Image")
  

meta_list <- left_join(list_split, Leaf_angles_classification, by = "Species.name")

setwd("~/Uni/LAB Jason/Experimental")
write.csv (meta_list, "Angle_meta_list.csv")
```
